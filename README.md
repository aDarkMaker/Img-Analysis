# 表情包图像分析工具

- 一个可以学习表情包中文字并且通过模型训练得到一个可以理解、分类、选择表情包的集成模型；
- 预计的使用场景为：
  - 基础的表情包分类分析
  - 接入到语言模型中根据上下文输出已有/训练好的表情包
  - 通过 onebot 协议嵌入到 QQ 机器人中在群里发电

## 训练过程

- 首先，收集并准备足够的表情包作为原始数据集 (通常存放于 `database/data/`)。
- 使用 `OCR/` 模块 (例如 CNOCR) 对表情包图片进行文字提取，结果可保存至 `ocr_result/`。
- 利用 `HanLP/` 模块对提取出的文字进行初步的语义分析。
- 可运行 `auto_annotate.py` 脚本辅助进行语义的自动标注，或结合手动方式对分析结果进行校准和打标。
- 将整理和标注好的数据集作为模型训练的基础。
- 通过执行 `model_training.py` 脚本进行核心模型的训练，整个流程亦可由 `train.py` 脚本统一管理和调度。
- 最终训练完成的模型将保存于 `model/` 目录中，例如 `meme_analyzer.pth`。

## 实现功能

- 在根目录运行 `python main.py` 可直接使用训练好的模型进行表情包分析。
- 该脚本会自动加载 `model/` 目录下的模型文件，此时你可以输入关键词进行表情包的搜索。
- 如果找到了合适的表情包那么就会返回所有符合条件的表情包图片路径。

## 项目结构

```
Image-Analysis/
├── README.md          # 项目说明文档
├── main.py            # 模型使用入口脚本
├── train.py           # 训练流程主控制脚本
├── model_training.py  # 核心模型训练脚本
├── auto_annotate.py   # 语义自动标注脚本
├── requirements.txt   # 项目依赖包列表
├── LICENSE            # 项目许可证
├── tips.txt           # 使用提示和技巧说明
├── img/               # 待处理的原始表情包图片目录
├── ocr_result/        # OCR文字识别结果存储目录
├── Trained_result/    # 模型分析的最终结果存储目录
├── OCR/               # OCR文字识别模块
│   └── ...            # (OCR模块相关代码和资源)
├── HanLP/             # HanLP语义分析模块
│   ├── README.md      # HanLP模块说明文档
│   ├── result/        # HanLP分析结果存储
│   └── src/           # HanLP模块源码
├── model/             # 训练好的模型文件存储目录
│   └── meme_analyzer.pth # 示例：已训练的表情包分析模型
└── database/          # 数据集及相关数据存储目录
    ├── data/          # 原始及处理后的数据集
    └── model/         # 数据预处理相关的模型文件 (如有)
```

## 使用要求

- Python 3.6+
- cnocr
- hanlp

## 开发阶段

1. 2025-5-21: 实现了基础的文字提取和语义打标

2. 后续阶段: 模型的初步训练以及扩大表情包数据集的收集
